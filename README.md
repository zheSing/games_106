# games106 

ç°ä»£å›¾å½¢ç»˜åˆ¶æµæ°´çº¿åŸç†ä¸å®è·µï¼Œä½œä¸šæ¡†æ¶ã€‚

è¿™ä¸ªforkæ¥è‡ª[SaschaWillems/Vulkan: Examples and demos for the new Vulkan API (github.com)](https://github.com/SaschaWillems/Vulkan) åœ¨è¿™ä¸ªé¡¹ç›®ä¸­æœ‰éå¸¸å¤šçš„exampleå¯ä»¥å­¦ä¹ ã€‚åœ¨å­¦ä¹ ä¸€ä¸ªAPIçš„æ—¶å€™ï¼Œä»£ç ç¤ºä¾‹æ°¸è¿œæ˜¯æœ€å¥½çš„è€å¸ˆã€‚æœ¬è¯¾ç¨‹çš„ä½œä¸šéœ€è¦åœ¨å·²æœ‰çš„ä»£ç ç¤ºä¾‹ä¸­åšä¿®æ”¹ã€‚

## Build

è¯¦æƒ…å¯ä»¥æŸ¥çœ‹é¡¹ç›®åŸæ¥çš„ [BUILDæ–‡æ¡£](./BUILD.md) ï¼Œå¯ä»¥åœ¨Windows/Linux/Andorid/macOS/iOSä¸­æ„å»º

## HomeWork

ä½œä¸šçš„è¯¾ç¨‹ä»£ç åœ¨./homeworkç›®å½•ä¸‹ï¼Œshaderåœ¨./data/homework/shadersä¸‹ã€‚ä¸Šä¼ ä½œä¸šä¹ŸæŒ‰ç…§ä¸€æ ·çš„æ–‡ä»¶ç»“æ„ã€‚ä¸Šä¼ å¯¹åº”çš„æ–‡ä»¶å³å¯ã€‚

### ä½œä¸šæäº¤

è¯¾ç¨‹å­¦ç”Ÿæ³¨å†Œæ–¹æ³•ï¼šç™»å½• [http://cn.ces-alpha.org/course/register/GAMES106/](http://cn.ces-alpha.org/course/register/GAMES106/) æ³¨å†Œè´¦å·ï¼Œå¡«å†™ä¸ªäººä¿¡æ¯ï¼Œè¾“å…¥éªŒè¯ç ilovegraphicsï¼Œå³å¯è¿›å…¥è¯¾ç¨‹ä¸»é¡µï¼ŒæŸ¥çœ‹å¹¶æäº¤ä½œä¸š

### homework0

ä½œä¸š0ï¼Œä½œä¸ºä¸€ä¸ªç†Ÿæ‚‰ç¼–è¯‘ç¯å¢ƒçš„è¯¾ç¨‹ä½œä¸šã€‚æœ€åæ˜¾ç¤ºä¸€ä¸ªå¦‚ä¸‹å›¾ä¸€æ ·çš„ä¸‰è§’å½¢ã€‚æœ‰å…´è¶£å¯ä»¥å°è¯•åœ¨Androidæˆ–è€…iOSä¸Šè¿è¡Œ

![triangle](./screenshots/triangle.jpg)

### homework1

ä½œä¸š1ï¼Œæ‰©å±•GLTF loadingã€‚ä½œä¸š1æä¾›äº†ä¸€ä¸ªgltfæ˜¾ç¤ºçš„demoï¼Œåªæ”¯æŒé™æ€æ¨¡å‹ï¼Œä»¥åŠé¢œè‰²è´´å›¾ã€‚ä½œä¸š1éœ€è¦åœ¨è¿™ä¸ªåŸºç¡€ä¸Šè¿›è¡Œå‡çº§ã€‚
#### ä½œä¸šæäº¤

æŒ‰ç…§ä»£ç æ¡†æ¶çš„ç›®å½•ï¼ˆæ–¹ä¾¿åŠ©æ•™æ£€æŸ¥å’Œè¿è¡Œä»£ç ï¼‰ï¼ŒæŠŠä¿®æ”¹çš„æ–‡ä»¶æ‰“åŒ…æˆzipï¼Œæˆ–è€…ç”¨git patchçš„æ–¹å¼æäº¤ä½œä¸šä»£ç ã€‚

#### ä½œä¸šè¦æ±‚
1. ä½œä¸šè¦æ±‚çš„gltfæ–‡ä»¶å·²ç»ä¸Šä¼ åˆ°äº†data/buster_drone/busterDrone.gltf
2. æ”¯æŒgltfçš„éª¨éª¼åŠ¨ç”»ã€‚
3. æ”¯æŒgltfçš„PBRçš„æè´¨ï¼ŒåŒ…æ‹¬æ³•çº¿è´´å›¾ã€‚
4. å¿…é¡»åœ¨homework1çš„åŸºç¡€ä¸Šåšä¿®æ”¹ï¼Œæäº¤å…¶ä»–æ¡†æ¶çš„ä»£ç ç®—ä½œä¸åˆæ ¼ã€‚
5. è¿›é˜¶ä½œä¸šï¼šå¢åŠ ä¸€ä¸ªTone Mappingçš„åå¤„ç†passã€‚å¢åŠ GLTFçš„æ»¤é•œåŠŸèƒ½ã€‚tonemapé€‰æ‹©ACESå®ç°å¦‚ä¸‹ã€‚è¿™ä¸ªå®ç°å¿…é¡»é€šè¿‡é¢å¤–å¢åŠ ä¸€ä¸ªrenderpassçš„æ–¹å¼å®ç°ã€‚
```c++
// tonemap æ‰€ä½¿ç”¨çš„å‡½æ•°
float3 Tonemap_ACES(const float3 c) {
    // Narkowicz 2015, "ACES Filmic Tone Mapping Curve"
    // const float a = 2.51;
    // const float b = 0.03;
    // const float c = 2.43;
    // const float d = 0.59;
    // const float e = 0.14;
    // return saturate((x*(a*x+b))/(x*(c*x+d)+e));

    //ACES RRT/ODT curve fit courtesy of Stephen Hill
	float3 a = c * (c + 0.0245786) - 0.000090537;
	float3 b = c * (0.983729 * c + 0.4329510) + 0.238081;
	return a / b;
}
```

ç›´æ¥è¿è¡Œä¼šä¸æˆåŠŸç¼ºå°‘GLTFæ¨¡å‹ã€‚ä»¥åŠå­—ä½“æ–‡ä»¶ã€‚æ ¹æ®[æ–‡æ¡£](./data/README.md)ä¸‹è½½ [https://vulkan.gpuinfo.org/downloads/vulkan_asset_pack_gltf.zip](https://vulkan.gpuinfo.org/downloads/vulkan_asset_pack_gltf.zip) å¹¶ä¸”è§£å‹åˆ°./dataæ–‡ä»¶å¤¹ä¸­

ä¸‹é¢æ˜¯ç›¸å…³çš„èµ„æ–™

- GLTFæ ¼å¼æ–‡æ¡£ [https://github.com/KhronosGroup/glTF](https://github.com/KhronosGroup/glTF)
- å¸¦åŠ¨ç”»çš„GLTFæ¨¡å‹å·²ç»ä¸Šä¼ åˆ°äº†ç›®å½•data/buster_drone/busterDrone.gltfã€‚è¿™ä¸ªgltfæ–‡ä»¶æ¥è‡ªäº [https://github.com/GPUOpen-LibrariesAndSDKs/Cauldron-Media/tree/v1.0.4/buster_drone](https://github.com/GPUOpen-LibrariesAndSDKs/Cauldron-Media/tree/v1.0.4/buster_drone)
  - Buster Drone by LaVADraGoN, published under a Attribution-NonCommercial 4.0 International (CC BY-NC 4.0) license
  - ä½œè€…å­˜æ”¾åœ¨sketchfabä¸Šå±•ç¤ºçš„é¡µé¢ [https://sketchfab.com/3d-models/buster-drone-294e79652f494130ad2ab00a13fdbafd](https://sketchfab.com/3d-models/buster-drone-294e79652f494130ad2ab00a13fdbafd)
- å®Œæˆè¿™ä¸ªä½œä¸šéœ€è¦é¢å¤–å­¦ä¹ çš„å†…å®¹ï¼Œéƒ½å¯ä»¥åœ¨ä½œä¸šæ¡†æ¶ä¸‹æ‰¾åˆ°ç¤ºä¾‹ä»£ç ç”¨äºå­¦ä¹ å’Œå‚ç…§ï¼ˆexample code æ˜¯å­¦ä¹ ä¸€ä¸ªapiæœ€å¥½çš„è€å¸ˆğŸ™‚ï¼‰
  - éª¨éª¼åŠ¨ç”»åœ¨è¿™ä¸ªå·¥ç¨‹ä¸‹æœ‰å¯ä»¥å­¦ä¹ çš„æ ·ä¾‹ examples/gltfskinning/gltfskinning.cpp
  - PBRæè´¨ 
    - ç›´æ¥å…‰ç…§ examples/pbrbasic/pbrbasic.cpp 
    - ç¯å¢ƒå…‰ç…§ examples/pbribl/pbribl.cpp

### homework2
æ‰©å±• homework/homework2 (æ¥è‡ªexamples/variablerateshading) ä¸­çš„ç¤ºä¾‹ï¼Œä½¿å¾—shading rate å¯ä»¥æ ¹æ®ç»˜åˆ¶ç»“æœæœ¬èº«å¾—é¢‘ç‡åŠ¨æ€è°ƒæ•´ï¼Œä»è€Œåœ¨ä¸å½±å“æ•´ä½“ç»˜åˆ¶è´¨é‡çš„å‰æä¸‹ï¼Œå‡å°‘ç€è‰²ç‡ã€‚
å¯ä»¥é˜…è¯»å¹¶å‚è€ƒ â€œVisually Lossless Content and Motion Adaptive Shading in Gamesâ€ ä¸­çš„æè¿°ï¼Œå®Œæˆ
1. Content Adaptive Variable Shading Rate
2. Motion Adaptive Variable Shading Rate

referenceè®ºæ–‡åœ¨: [data/Visually Lossless Content and Motion Adaptive Shading in Games.pdf](./data/Visually%20Lossless%20Content%20and%20Motion%20Adaptive%20Shading%20in%20Games.pdf)

### homework3
homework3 æ¯”è¾ƒç‹¬ç«‹ï¼Œä½œä¸šçš„æ¡†æ¶ä»£ç ä»¥åŠä½œä¸šè¦æ±‚ï¼š[GAMES106-HW5](https://github.com/Chaphlagical/GAMES106-HW5)

### homework4
æ‰©å±• homework/homework4 (æ¥è‡ªexample/texturecubemap) ä¸­çš„ç¤ºä¾‹ã€‚
ä½œä¸šè¦æ±‚ï¼š
1. ä¿®æ”¹å‡½æ•°```void loadCubemap(std::string filename, VkFormat format, bool forceLinearTiling)```ã€‚ç¤ºä¾‹ä¸­çš„```textures/cubemap_yokohama_rgba.ktx```æ˜¯ä¸€å¼ RGBA8çš„ktxå›¾ï¼Œä½¿ç”¨ä»»æ„å¹³å°æ”¯æŒçš„å‹ç¼©æ ¼å¼å‹ç¼©ï¼Œæ¯”å¦‚BC7ï¼ŒASTCï¼Œæˆ–è€…ETC2ç­‰ç­‰ä¹‹ç±»çš„å‹ç¼©æ ¼å¼ã€‚æŠŠè¿™å¼ RGBAæ ¼å¼çš„å›¾ç‰‡å‹ç¼©æˆå‹ç¼©çº¹ç†ã€‚